<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>CodeJam Kickstart Round E 分析 - int main() { return 0; }</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><meta name=keywords content><link rel=canonical href=/blog/codejam-kickstart-round-e-%E5%88%86%E6%9E%90/><link rel=stylesheet type=text/css href='//fonts.googleapis.com/css?family=Lato:900,400,300'><link rel=stylesheet type=text/css href=//css/combined-min.css></head><body><div class=site-wrap><header class="site-header px2 px-responsive"><div class="mt2 wrap"><div class=measure><a href=/ class=site-title>int main() { return 0; }</a><nav class="site-nav right"><a href=//about/>About</a>
<a href=//tags/>Tags</a>
<a href=https://intmainreturn0.com/cv>Resume</a>
<a href=//contact/>Contact</a></form></nav><div class=clearfix></div></div></div></header><div class="post p2 p-responsive wrap" role=main><div class=measure><div class="post-header mb2"><h1 class=py2>CodeJam Kickstart Round E 分析</h1><span class=post-meta>Aug 25, 2019 by htfy96</span><br></div><article class=post-content><p>最近总算空出了点时间玩算法竞赛（虽然是菜鸡Kickstart版本）。很多东西都已经记不住了导致没时间写Q3了。先写前两题题解吧。</p><h1 id=cherries-mesh>Cherries Mesh</h1><h2 id=题意>题意</h2><p>给定&lt;=10^5个点，完全图，两两之间由权重为1的黑边或权重为2的红边相连。给定&lt;=10^5条黑边。求最小生成树权重。</p><h2 id=解法>解法</h2><p>大致是Kruskal，首先把所有黑边跑一遍，add if getfa(a) != getfa(b)。如果有n_k条黑边被add，那么结果就是n_k + (N - 1 - n_k) * 2</p><h2 id=代码>代码</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#define T_ long long  
</span></span></span><span class=line><span class=cl><span class=cp>#define fuck(s_) {cout&lt;&lt;s_&lt;&lt;endl;return 0;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr(a_,x_) rep(i_,x_)cout&lt;&lt;a_[i_]&lt;&lt;&#34; &#34;;cout&lt;&lt;endl; 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr0(a_,x_) rep0(i_,x_)cout&lt;&lt;a_[i_]&lt;&lt;&#34; &#34;;cout&lt;&lt;endl; 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr2(a_,x_,y_) rep(i_,x_){rep(j_,y_)cout&lt;&lt;a_[i_][j_]&lt;&lt;&#39; &#39;;cout&lt;&lt;endl;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr20(a_,x_,y_) rep0(i_,x_){rep0(j_,y_)cout&lt;&lt;a[i_][j_]&lt;&lt;&#39; &#39;;cout&lt;&lt;endl;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep2o(a_,b_,n_) rep(a_,n_) re(b_,a_+1,n_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep20o(a_,b_,n_) rep0(a_,n_) re0(b_,a_+1,n_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep2(a_,b_,p_,q_) rep(a_,p_) rep(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep20(a_,b_,p_,q_) rep0(a_,p_) rep0(b_,q_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep2(a_,b_,p_,q_) rrep(a_,p_) rrep(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep20(a_,b_,p_,q_) rrep0(a_,p_) rrep0(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep3(a_,b_,c_,p_,q_,r_) rep(a_,p_) rep(b_,q_) rep(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep30(a_,b_,c_,p_,q_,r_) rep0(a_,p_) rep0(b_,q_) rep0(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep3(a_,b_,c_,p_,q_,r_) rrep(a_,p_) rrep(b_,q_) rrep(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep30(a_,b_,c_,p_,q_,r_) rrep0(a_,p_) rrep0(b_,q_) rrep0(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep(a_,x_) re(a_,1,x_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep0(a_,x_) re0(a_,0,x_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep(a_,x_) rre(a_,x_,1) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep0(a_,x_) rre(a_,x_-1,0) 
</span></span></span><span class=line><span class=cl><span class=cp>#define re(a_,s_,t_) for(T_ a_=s_;a_&lt;=t_;++a_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define re0(a_,s_,t_) for(T_ a_=s_;a_&lt;t_;++a_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rre(a_,s_,t_) for(T_ a_=s_;a_&gt;=t_;--a_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rre0(a_,s_,t_) for(T_ a_=s_;a_&gt;t_;--a_)
</span></span></span><span class=line><span class=cl><span class=cp>#define repit(a_,c_) for(__typeof__(a_.begin()) c_=a_.begin();c_!=a_.end();++c_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define nosync std::ios::sync_with_stdio(false);std::cin.tie(0);ios_base::sync_with_stdio(0) 
</span></span></span><span class=line><span class=cl><span class=cp>#define DE false 
</span></span></span><span class=line><span class=cl><span class=cp>#define de(s_) if(DE){s_ } 
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdio&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdlib&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstring&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cmath&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;algorithm&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;map&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;deque&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;list&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;set&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;numeric&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;bitset&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;fstream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iomanip&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;sstream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;ctime&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stack&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;queue&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cassert&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;climits&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#pragma GCC optimize(&#34;O2&#34;)
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#define endl &#39;\n&#39;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>const</span> <span class=kt>int</span> <span class=n>dx4</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>dy4</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>};</span>  
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>modb</span><span class=o>=</span><span class=mi>1000000007</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=n>inf</span><span class=o>=</span><span class=mh>0x3f3f3f3f</span><span class=p>;</span>      
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>oo</span><span class=o>=</span><span class=mf>1e15</span><span class=p>;</span>           
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>eps</span><span class=o>=</span><span class=mf>1e-8</span><span class=p>;</span>          
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>pi</span><span class=o>=</span><span class=n>acos</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0</span><span class=p>);</span>     
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=n>clr</span><span class=p>(</span><span class=n>T</span><span class=o>*</span> <span class=n>a_</span><span class=p>,</span><span class=kt>int</span> <span class=n>n_</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>size_t</span> <span class=n>s_</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span><span class=k>if</span> <span class=p>(</span><span class=n>s_</span><span class=o>==-</span><span class=mi>1</span><span class=p>)</span> <span class=n>s_</span><span class=o>=</span><span class=k>sizeof</span><span class=p>(</span><span class=n>a_</span><span class=p>);</span> <span class=n>memset</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>n_</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>a_</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span><span class=o>*</span><span class=n>s_</span><span class=p>);</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=n>sqr</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=n>cub</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=n>T_</span> <span class=nf>mf</span><span class=p>(</span><span class=n>T_</span> <span class=n>n_</span><span class=p>)</span> <span class=p>{</span><span class=k>return</span> <span class=p>((</span><span class=n>n_</span><span class=o>&lt;</span><span class=mi>0</span><span class=p>)</span><span class=o>?</span><span class=n>n_</span><span class=o>+</span><span class=p>(</span><span class=n>modb</span><span class=o>&lt;&lt;</span><span class=mi>2</span><span class=p>)</span><span class=o>:</span><span class=n>n_</span><span class=p>)</span><span class=o>%</span><span class=n>modb</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span><span class=n>T</span> <span class=n>max</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>,</span><span class=n>T</span> <span class=n>b_</span><span class=p>,</span><span class=n>T</span> <span class=n>c_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nf>max</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>max</span><span class=p>(</span><span class=n>b_</span><span class=p>,</span><span class=n>c_</span><span class=p>));</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span><span class=n>T</span> <span class=n>min</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>,</span><span class=n>T</span> <span class=n>b_</span><span class=p>,</span><span class=n>T</span> <span class=n>c_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nf>min</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>min</span><span class=p>(</span><span class=n>b_</span><span class=p>,</span><span class=n>c_</span><span class=p>));</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>int</span> <span class=nf>dbcmp</span><span class=p>(</span><span class=kt>double</span> <span class=n>a_</span><span class=p>,</span> <span class=kt>double</span> <span class=n>b_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=p>(</span><span class=n>fabs</span><span class=p>(</span><span class=n>a_</span><span class=o>-</span><span class=n>b_</span><span class=p>)</span><span class=o>&lt;</span><span class=n>eps</span><span class=p>)</span><span class=o>?</span><span class=mi>0</span><span class=o>:</span><span class=p>(</span><span class=n>a_</span><span class=o>&lt;</span><span class=n>b_</span><span class=o>?-</span><span class=mi>1</span><span class=o>:</span><span class=mi>1</span><span class=p>);</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>double</span> <span class=nf>dbdiv</span><span class=p>(</span><span class=n>T_</span> <span class=n>a_</span><span class=p>,</span> <span class=n>T_</span> <span class=n>b_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=k>static_cast</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=p>(</span><span class=n>a_</span><span class=p>)</span> <span class=o>/</span> <span class=n>b_</span><span class=p>;</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>double</span> <span class=nf>angle</span><span class=p>(</span><span class=kt>double</span> <span class=n>x_</span><span class=p>,</span> <span class=kt>double</span> <span class=n>y_</span><span class=p>)</span> <span class=p>{</span> <span class=k>if</span> <span class=p>(</span><span class=n>x_</span><span class=o>==</span><span class=mf>0.0</span><span class=p>)</span> <span class=k>return</span> <span class=n>y_</span><span class=o>&gt;</span><span class=mi>0</span><span class=o>?</span><span class=n>pi</span><span class=o>/</span><span class=mi>2</span><span class=o>:</span><span class=mi>3</span><span class=o>*</span><span class=n>pi</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span> <span class=k>else</span> <span class=p>{</span> <span class=kt>double</span> <span class=n>t_</span><span class=o>=</span><span class=n>atan2</span><span class=p>(</span><span class=n>y_</span><span class=p>,</span><span class=n>x_</span><span class=p>);</span> <span class=k>return</span> <span class=p>(</span><span class=n>t_</span><span class=o>&lt;</span><span class=mf>0.0</span><span class=o>?</span><span class=n>t_</span><span class=o>+</span><span class=nl>pi</span><span class=p>:</span><span class=n>t_</span><span class=p>)</span> <span class=o>+</span> <span class=n>y_</span><span class=o>&lt;</span><span class=mi>0</span><span class=o>?</span><span class=nl>pi</span><span class=p>:</span><span class=mf>0.0</span><span class=p>;</span> <span class=p>}}</span> 
</span></span><span class=line><span class=cl><span class=cm>/******************************************************************************************/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>fa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>getfa</span><span class=p>(</span><span class=kt>int</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>v</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>fa</span><span class=p>[</span><span class=n>t</span><span class=p>]</span> <span class=o>!=</span> <span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span> <span class=o>=</span> <span class=n>fa</span><span class=p>[</span><span class=n>t</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>fa</span><span class=p>[</span><span class=n>v</span><span class=p>]</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>merge</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>fa</span><span class=p>[</span><span class=n>getfa</span><span class=p>(</span><span class=n>a</span><span class=p>)]</span> <span class=o>=</span> <span class=n>getfa</span><span class=p>(</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>nosync</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>rep</span><span class=p>(</span><span class=n>tt</span><span class=p>,</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>fa</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>fa</span><span class=p>.</span><span class=n>resize</span><span class=p>(</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>rep</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>fa</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>used</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=p>(</span><span class=n>m</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>st</span><span class=p>,</span> <span class=n>ed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>st</span> <span class=o>&gt;&gt;</span> <span class=n>ed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>getfa</span><span class=p>(</span><span class=n>st</span><span class=p>)</span> <span class=o>!=</span> <span class=n>getfa</span><span class=p>(</span><span class=n>ed</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=o>++</span><span class=n>used</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>merge</span><span class=p>(</span><span class=n>st</span><span class=p>,</span> <span class=n>ed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>used</span> <span class=o>+</span> <span class=p>(</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>used</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Case #&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>tt</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;: &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>ans</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=code-eat-switcher>Code-Eat Switcher</h1><h2 id=题意-1>题意</h2><p>给定S个time slot，每个slot中可以选择一个百分比f_i来做事情C ： 能完成f_i * C_i单位的事情C；剩下的(1 - f_i)做事情E：能完成(1 - f_i) * E_i的事件E。</p><p>总共能完成的事件C是 Sum(f_i * C_i) 单位。总共能完成的事件E是 Sum( (1 - f_i) * E_i ) 单位。</p><p>给定D个询问，每个询问是(Q_c, Q_e)表示是否存在一种f_i的选择，使得总完成的事件C >= Q_c and 总完成的事件E >= Q_e。</p><p>S &lt;= 10^5, D &lt;= 10^5</p><h2 id=解法-1>解法</h2><p>简单来说对于每个询问我们就是要判断下列不等式是否有解：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sum (f_i * C_i) &gt;= Q_c
</span></span><span class=line><span class=cl>Sum ((1 - f_i) * E_i) &gt;= Q_e
</span></span><span class=line><span class=cl>0 &lt;= f_i &lt;= 1
</span></span></code></pre></div><p>本来想直接套单纯形法模版的，但是最后一个式子会让式子数目变成O(S)所以不行。</p><p>变形一下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sum (f_i * C_i) &gt;= Q_c ............(1)
</span></span><span class=line><span class=cl>Sum (f_i * E_i) &lt;= Sum(E_i) - Q_e .(2)
</span></span><span class=line><span class=cl>0 &lt;= f_i &lt;= 1
</span></span></code></pre></div><p>因为C_i, E_i, Q_c >= 0，所以我们可以把第一个式子换成等号（如果存在 (1)的左边 > Q_c且满足不等式的一组解，那么我们一定可以减小某一个f_i，让(1)的左边减小到Q_c，同时(2)的左边仍然减小满足题意）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sum (f_i * C_i) = Q_c .............(3)
</span></span><span class=line><span class=cl>Sum (f_i * E_i) &lt;= Sum(E_i) - Q_e .(4)
</span></span><span class=line><span class=cl>0 &lt;= f_i &lt;= 1
</span></span></code></pre></div><p>在给定Q_c的情况下，最小化 (4) 左边的方法一定是从C_i / E_i最大的slot中选取f_i。因此我们可以把所有S按照C_i / E_i排序。所有的Query按照Q_c排序。初始 f_i = 0。对于每个询问，不断从C_i / E_i最大的元素中增加f_i，直到总的Sum (f_i * C_i) = Q_c为止。这个询问的结果就是在这个assignment of f_i下，Sum (f_i * E_i) &lt;= Sum(E_i) - Q_e是否成立。</p><h2 id=代码-1>代码</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#define T_ long long  
</span></span></span><span class=line><span class=cl><span class=cp>#define fuck(s_) {cout&lt;&lt;s_&lt;&lt;endl;return 0;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr(a_,x_) rep(i_,x_)cout&lt;&lt;a_[i_]&lt;&lt;&#34; &#34;;cout&lt;&lt;endl; 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr0(a_,x_) rep0(i_,x_)cout&lt;&lt;a_[i_]&lt;&lt;&#34; &#34;;cout&lt;&lt;endl; 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr2(a_,x_,y_) rep(i_,x_){rep(j_,y_)cout&lt;&lt;a_[i_][j_]&lt;&lt;&#39; &#39;;cout&lt;&lt;endl;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define printarr20(a_,x_,y_) rep0(i_,x_){rep0(j_,y_)cout&lt;&lt;a[i_][j_]&lt;&lt;&#39; &#39;;cout&lt;&lt;endl;} 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep2o(a_,b_,n_) rep(a_,n_) re(b_,a_+1,n_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep20o(a_,b_,n_) rep0(a_,n_) re0(b_,a_+1,n_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep2(a_,b_,p_,q_) rep(a_,p_) rep(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep20(a_,b_,p_,q_) rep0(a_,p_) rep0(b_,q_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep2(a_,b_,p_,q_) rrep(a_,p_) rrep(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep20(a_,b_,p_,q_) rrep0(a_,p_) rrep0(b_,q_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep3(a_,b_,c_,p_,q_,r_) rep(a_,p_) rep(b_,q_) rep(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep30(a_,b_,c_,p_,q_,r_) rep0(a_,p_) rep0(b_,q_) rep0(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep3(a_,b_,c_,p_,q_,r_) rrep(a_,p_) rrep(b_,q_) rrep(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep30(a_,b_,c_,p_,q_,r_) rrep0(a_,p_) rrep0(b_,q_) rrep0(c_,r_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rep(a_,x_) re(a_,1,x_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rep0(a_,x_) re0(a_,0,x_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep(a_,x_) rre(a_,x_,1) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rrep0(a_,x_) rre(a_,x_-1,0) 
</span></span></span><span class=line><span class=cl><span class=cp>#define re(a_,s_,t_) for(T_ a_=s_;a_&lt;=t_;++a_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define re0(a_,s_,t_) for(T_ a_=s_;a_&lt;t_;++a_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define rre(a_,s_,t_) for(T_ a_=s_;a_&gt;=t_;--a_)
</span></span></span><span class=line><span class=cl><span class=cp>#define rre0(a_,s_,t_) for(T_ a_=s_;a_&gt;t_;--a_)
</span></span></span><span class=line><span class=cl><span class=cp>#define repit(a_,c_) for(__typeof__(a_.begin()) c_=a_.begin();c_!=a_.end();++c_) 
</span></span></span><span class=line><span class=cl><span class=cp>#define nosync std::ios::sync_with_stdio(false);std::cin.tie(0);ios_base::sync_with_stdio(0) 
</span></span></span><span class=line><span class=cl><span class=cp>#define DE false 
</span></span></span><span class=line><span class=cl><span class=cp>#define de(s_) if(DE){s_ } 
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdio&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdlib&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstring&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cmath&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;algorithm&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;map&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;deque&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;list&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;set&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;numeric&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;bitset&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;fstream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iomanip&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;sstream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;ctime&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stack&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;queue&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cassert&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;climits&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#pragma GCC optimize(&#34;O2&#34;)
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#define endl &#39;\n&#39;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>const</span> <span class=kt>int</span> <span class=n>dx4</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>dy4</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>};</span>  
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>modb</span><span class=o>=</span><span class=mi>1000000007</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=n>inf</span><span class=o>=</span><span class=mh>0x3f3f3f3f</span><span class=p>;</span>      
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>oo</span><span class=o>=</span><span class=mf>1e15</span><span class=p>;</span>           
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>eps</span><span class=o>=</span><span class=mf>1e-8</span><span class=p>;</span>          
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>double</span> <span class=n>pi</span><span class=o>=</span><span class=n>acos</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0</span><span class=p>);</span>     
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=n>clr</span><span class=p>(</span><span class=n>T</span><span class=o>*</span> <span class=n>a_</span><span class=p>,</span><span class=kt>int</span> <span class=n>n_</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>size_t</span> <span class=n>s_</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span><span class=k>if</span> <span class=p>(</span><span class=n>s_</span><span class=o>==-</span><span class=mi>1</span><span class=p>)</span> <span class=n>s_</span><span class=o>=</span><span class=k>sizeof</span><span class=p>(</span><span class=n>a_</span><span class=p>);</span> <span class=n>memset</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>n_</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>a_</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span><span class=o>*</span><span class=n>s_</span><span class=p>);</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=n>sqr</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span> <span class=n>cub</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=o>*</span><span class=n>a_</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=n>T_</span> <span class=nf>mf</span><span class=p>(</span><span class=n>T_</span> <span class=n>n_</span><span class=p>)</span> <span class=p>{</span><span class=k>return</span> <span class=p>((</span><span class=n>n_</span><span class=o>&lt;</span><span class=mi>0</span><span class=p>)</span><span class=o>?</span><span class=n>n_</span><span class=o>+</span><span class=p>(</span><span class=n>modb</span><span class=o>&lt;&lt;</span><span class=mi>2</span><span class=p>)</span><span class=o>:</span><span class=n>n_</span><span class=p>)</span><span class=o>%</span><span class=n>modb</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span><span class=n>T</span> <span class=n>max</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>,</span><span class=n>T</span> <span class=n>b_</span><span class=p>,</span><span class=n>T</span> <span class=n>c_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nf>max</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>max</span><span class=p>(</span><span class=n>b_</span><span class=p>,</span><span class=n>c_</span><span class=p>));</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span><span class=n>T</span> <span class=n>min</span><span class=p>(</span><span class=n>T</span> <span class=n>a_</span><span class=p>,</span><span class=n>T</span> <span class=n>b_</span><span class=p>,</span><span class=n>T</span> <span class=n>c_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nf>min</span><span class=p>(</span><span class=n>a_</span><span class=p>,</span><span class=n>min</span><span class=p>(</span><span class=n>b_</span><span class=p>,</span><span class=n>c_</span><span class=p>));</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>int</span> <span class=nf>dbcmp</span><span class=p>(</span><span class=kt>double</span> <span class=n>a_</span><span class=p>,</span> <span class=kt>double</span> <span class=n>b_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=p>(</span><span class=n>fabs</span><span class=p>(</span><span class=n>a_</span><span class=o>-</span><span class=n>b_</span><span class=p>)</span><span class=o>&lt;</span><span class=n>eps</span><span class=p>)</span><span class=o>?</span><span class=mi>0</span><span class=o>:</span><span class=p>(</span><span class=n>a_</span><span class=o>&lt;</span><span class=n>b_</span><span class=o>?-</span><span class=mi>1</span><span class=o>:</span><span class=mi>1</span><span class=p>);</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>double</span> <span class=nf>dbdiv</span><span class=p>(</span><span class=n>T_</span> <span class=n>a_</span><span class=p>,</span> <span class=n>T_</span> <span class=n>b_</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=k>static_cast</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=p>(</span><span class=n>a_</span><span class=p>)</span> <span class=o>/</span> <span class=n>b_</span><span class=p>;</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>double</span> <span class=nf>angle</span><span class=p>(</span><span class=kt>double</span> <span class=n>x_</span><span class=p>,</span> <span class=kt>double</span> <span class=n>y_</span><span class=p>)</span> <span class=p>{</span> <span class=k>if</span> <span class=p>(</span><span class=n>x_</span><span class=o>==</span><span class=mf>0.0</span><span class=p>)</span> <span class=k>return</span> <span class=n>y_</span><span class=o>&gt;</span><span class=mi>0</span><span class=o>?</span><span class=n>pi</span><span class=o>/</span><span class=mi>2</span><span class=o>:</span><span class=mi>3</span><span class=o>*</span><span class=n>pi</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span> <span class=k>else</span> <span class=p>{</span> <span class=kt>double</span> <span class=n>t_</span><span class=o>=</span><span class=n>atan2</span><span class=p>(</span><span class=n>y_</span><span class=p>,</span><span class=n>x_</span><span class=p>);</span> <span class=k>return</span> <span class=p>(</span><span class=n>t_</span><span class=o>&lt;</span><span class=mf>0.0</span><span class=o>?</span><span class=n>t_</span><span class=o>+</span><span class=nl>pi</span><span class=p>:</span><span class=n>t_</span><span class=p>)</span> <span class=o>+</span> <span class=n>y_</span><span class=o>&lt;</span><span class=mi>0</span><span class=o>?</span><span class=nl>pi</span><span class=p>:</span><span class=mf>0.0</span><span class=p>;</span> <span class=p>}}</span> 
</span></span><span class=line><span class=cl><span class=cm>/******************************************************************************************/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Q</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>first</span><span class=p>;</span> <span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>double</span> <span class=n>second</span><span class=p>;</span> <span class=c1>// B
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>T_</span> <span class=n>idx</span><span class=p>;</span> <span class=c1>// idx
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>char</span> <span class=n>ans</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>rep</span><span class=p>(</span><span class=n>tt</span><span class=p>,</span> <span class=n>T</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>d</span><span class=p>,</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>d</span> <span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>double</span><span class=p>,</span> <span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>rep</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>c</span><span class=p>,</span> <span class=n>e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>c</span> <span class=o>&gt;&gt;</span> <span class=n>e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>sort</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>a</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=k>auto</span> <span class=n>p1</span><span class=p>,</span> <span class=k>auto</span> <span class=n>p2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>p1</span><span class=p>.</span><span class=n>second</span> <span class=o>/</span> <span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>first</span> <span class=o>+</span> <span class=mf>1e-8</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>p2</span><span class=p>.</span><span class=n>second</span> <span class=o>/</span> <span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>first</span> <span class=o>+</span> <span class=mf>1e-8</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span> <span class=c1>// sort by c / e, from large to small
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=c1>// sum ( f_i * C_i ) = A
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// sum(f_i * E_i) &lt;= sum(E_i) - B
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>double</span> <span class=n>se</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>v</span><span class=p>:</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>se</span> <span class=o>+=</span> <span class=n>v</span><span class=p>.</span><span class=n>second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>vector</span><span class=o>&lt;</span><span class=n>Q</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>rep</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>d</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>double</span> <span class=n>A</span><span class=p>,</span> <span class=n>B</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>A</span> <span class=o>&gt;&gt;</span> <span class=n>B</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>q</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>Q</span><span class=p>{</span><span class=n>A</span><span class=p>,</span> <span class=n>B</span><span class=p>,</span> <span class=n>i</span><span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>sort</span><span class=p>(</span><span class=n>q</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>q</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;&amp;</span> <span class=n>p1</span><span class=p>,</span> <span class=k>auto</span><span class=o>&amp;&amp;</span> <span class=n>p2</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>p1</span><span class=p>.</span><span class=n>first</span> <span class=o>&lt;</span> <span class=n>p2</span><span class=p>.</span><span class=n>first</span><span class=p>;</span> <span class=p>});</span> <span class=c1>// sort by A
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>double</span> <span class=n>locse</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>sa</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ni</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>npart</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>rep0</span><span class=p>(</span><span class=n>nx</span><span class=p>,</span> <span class=n>q</span><span class=p>.</span><span class=n>size</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nl>AGAIN</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>assert</span><span class=p>(</span><span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>first</span> <span class=o>-</span> <span class=n>sa</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mf>1e-4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>first</span> <span class=o>-</span> <span class=n>sa</span> <span class=o>&lt;</span> <span class=mf>1e-8</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                 <span class=c1>//cout &lt;&lt; &#34;For Q= &#34; &lt;&lt; q[nx].idx &lt;&lt; &#34; sa = &#34; &lt;&lt; q[nx].first &lt;&lt; &#34; locse = &#34; &lt;&lt; locse &lt;&lt; &#34; qb = &#34; &lt;&lt; q[nx].second &lt;&lt; endl;
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>ans</span> <span class=o>=</span> <span class=p>((</span><span class=n>locse</span>  <span class=o>-</span> <span class=p>(</span><span class=n>se</span> <span class=o>-</span> <span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>second</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mf>1e-8</span><span class=p>)</span> <span class=o>?</span> <span class=sc>&#39;Y&#39;</span> <span class=o>:</span> <span class=sc>&#39;N&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>ni</span> <span class=o>&gt;=</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>ans</span> <span class=o>=</span> <span class=sc>&#39;N&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=kt>double</span> <span class=n>p</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>].</span><span class=n>first</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>?</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>npart</span><span class=p>)</span> <span class=o>:</span> <span class=n>min</span><span class=p>((</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>npart</span><span class=p>),</span> <span class=p>(</span><span class=n>q</span><span class=p>[</span><span class=n>nx</span><span class=p>].</span><span class=n>first</span> <span class=o>-</span> <span class=n>sa</span><span class=p>)</span> <span class=o>/</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>].</span><span class=n>first</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>sa</span> <span class=o>+=</span> <span class=n>p</span> <span class=o>*</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>].</span><span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>npart</span> <span class=o>+=</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>locse</span> <span class=o>+=</span> <span class=n>p</span> <span class=o>*</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>].</span><span class=n>second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>npart</span> <span class=o>+</span> <span class=mf>1e-8</span> <span class=o>&gt;=</span> <span class=mf>1.0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=o>++</span><span class=n>ni</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>npart</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>goto</span> <span class=n>AGAIN</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Case #&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>tt</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;: &#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>sort</span><span class=p>(</span><span class=n>q</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>q</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=k>auto</span> <span class=n>p1</span><span class=p>,</span> <span class=k>auto</span> <span class=n>p2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>p1</span><span class=p>.</span><span class=n>idx</span> <span class=o>&lt;</span> <span class=n>p2</span><span class=p>.</span><span class=n>idx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span><span class=o>&amp;&amp;</span> <span class=nl>p</span> <span class=p>:</span> <span class=n>q</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>p</span><span class=p>.</span><span class=n>ans</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></article><p class=post-meta>Tags:&nbsp;
<a href=//tags/algorithm>algorithm</a>
,&nbsp;
<a href=//tags/%e7%ae%97%e6%b3%95>算法</a>
,&nbsp;
<a href=//tags/codejam>codejam</a>
,&nbsp;
<a href=//tags/kickstart>kickstart</a></p></div></div></div><footer class=footer><div class="p2 wrap"><div class="measure mt1 center"><nav class="social-icons icons"><a class="fa fa-rss rss" href=/index.xml></a>
<a class="fa fa-twitter twitter" href=https://twitter.com/HTwood96></a></nav><small>Copyright &#169; 2017<br>Powered by <a href=http://gohugo.io/ target=_blank>Hugo</a> & <a href=https://github.com/azmelanar/hugo-theme-pixyll target=_blank>Pixyll</a></small></div></div></footer><script src=/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>