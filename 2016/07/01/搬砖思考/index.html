<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>搬砖思考 - int main() { return 0; }</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><meta name=keywords content><link rel=canonical href=/2016/07/01/%E6%90%AC%E7%A0%96%E6%80%9D%E8%80%83/><link rel=stylesheet type=text/css href='//fonts.googleapis.com/css?family=Lato:900,400,300'><link rel=stylesheet type=text/css href=//css/combined-min.css></head><body><div class=site-wrap><header class="site-header px2 px-responsive"><div class="mt2 wrap"><div class=measure><a href=/ class=site-title>int main() { return 0; }</a><nav class="site-nav right"><a href=//about/>About</a>
<a href=//tags/>Tags</a>
<a href=https://intmainreturn0.com/cv>Resume</a>
<a href=//contact/>Contact</a></form></nav><div class=clearfix></div></div></div></header><div class="post p2 p-responsive wrap" role=main><div class=measure><div class="post-header mb2"><h1 class=py2>搬砖思考</h1><span class=post-meta>Jul 1, 2016 by htfy96</span><br></div><article class=post-content><p>最近在实验室维护一个很老的PHP项目。。。大致来说就是一个电影数据库，每一个电影有着复杂的关联关系：例如说可能与多个staff有关，每个staff信息保存在people表中，这个staff在不同影片中角色可能不同，所以就要有relation_person_video表……</p><p>然后之前的代码已经基本垮了……前端JQuery强行插入HTML字符串维护列表…… get/post的时候直接发送{tablename, field, constraint}……而且后端也没校验、裸写SQL…… 耦合度非常高，这样就很难维护了……</p><p>接手之后做了一些微小的工作：</p><ul><li>前端：使用Vue进行数据绑定，一下子去掉了200+行的代码，特别是列表现在变得很方便处理了： &lt;div id=&ldquo;listContainer&rdquo;>
&lt;ul>
&lt;li v-for=&ldquo;item in items&rdquo;>{{item}}&lt;/li>
&lt;/ul>
&lt;/div></li></ul><p>&lt;script>
var list = [];
$(function() {
new Vue({
el: &lsquo;#listContainer&rsquo;,
data: {
items: list
}
});
});
&lt;/script></p><pre><code>之后就像正常数组一样操纵list对象就行了&lt;/li&gt; 

  * 后端：由于历史遗留问题不能用ORM……暂时用QueryBuilder先顶着
  * 架构：MVVM，影片信息和前端交互时全部包装成VM JSON，转换和存取都在后端完成&lt;/ul&gt;</code></pre></article></div></div></div><footer class=footer><div class="p2 wrap"><div class="measure mt1 center"><nav class="social-icons icons"><a class="fa fa-rss rss" href=/index.xml></a>
<a class="fa fa-twitter twitter" href=https://twitter.com/HTwood96></a></nav><small>Copyright &#169; 2017<br>Powered by <a href=http://gohugo.io/ target=_blank>Hugo</a> & <a href=https://github.com/azmelanar/hugo-theme-pixyll target=_blank>Pixyll</a></small></div></div></footer><script src=/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>